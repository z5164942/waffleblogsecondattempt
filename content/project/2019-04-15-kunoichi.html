---
title: "A kunoichi page"
author: "Danielle Navarro"
date: "2019-04-15"
slug: kunoichi
tags: ["slumdown", "kunoichi"]
colourscheme: "css/palette_kunoichi.css"
summary: "A simple project page illustrating how user-defined themes in *slumdown* can be used as the basis of individual pages and ggplot2 figures. It doesn't do very much."
header:
  image: 'header/theme_kunoichi.png'
---



<div id="the-kunoichi-palette" class="section level2">
<h2>The kunoichi palette</h2>
<p>In an <a href="/post/colour-palettes/">earlier post</a> I created the <em>kunoichi</em> palette. This is an example of a project page that uses this user-generated palette.</p>
<pre class="r"><code>library(tidyverse)
library(slumdown)

ggplot(mpg, aes(displ, hwy)) + 
  geom_point() + theme_slum(&quot;kunoichi&quot;)</code></pre>
<p><img src="/project/2019-04-15-kunoichi_files/figure-html/unnamed-chunk-1-1.png" width="672" /></p>
<p>A plot with faceting:</p>
<pre class="r"><code># Note that this is the path as specified within your slumdown project.
# At the time blogdown serves the site, this ends up in the /data folder
# not /static/data. 
filepath &lt;- here::here(&quot;static&quot;, &quot;data&quot;,&quot;brownian_bridges.csv&quot;)


bridges &lt;- read_csv(filepath)

b &lt;- ggplot(
  data = bridges,
  mapping = aes(
    x = Horizontal,
    y = Vertical,
    colour = factor(Series))) + 
  geom_point(
    show.legend = FALSE,
    size = 4) +
  coord_equal() +
  scale_x_continuous(limits = c(-1.5, 1), labels = NULL) +
  scale_y_continuous(limits = c(-1.25, 1.25), labels = NULL) +
  theme_slum(&quot;kunoichi&quot;) + 
  theme(panel.grid.minor = element_blank())

b + facet_wrap(vars(Time), nrow=5)</code></pre>
<p><img src="/project/2019-04-15-kunoichi_files/figure-html/unnamed-chunk-2-1.png" width="672" /></p>
<p>The white space here is annoying, and it ruins the whole aesthetic of the plot. The source of the issue is not ggplot, however, it occurs because the png file generated by R markdown has a different aspect ratio than the one that ggplot specifies The result is that the graphics device (<code>png()</code> in this case) supplies its own background colour, which defaults to white. Happily, knitr allow us to pass custom arguments to the graphics device, and <code>slumdown</code> provides a convenience function that does this:</p>
<pre class="r"><code>slum_plot_background(&quot;kunoichi&quot;)</code></pre>
<p>So now when we create the figure, the background is seamless because ggplot, the graphics device and the HTML page all rely on the “pagecolour” value specified in the kunoichi palette:</p>
<pre class="r"><code>b + facet_wrap(vars(Time), nrow=5)</code></pre>
<p><img src="/project/2019-04-15-kunoichi_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
<p>Alternatively, using <code>theme_void()</code> will remove all ggplot2 theme information, so now the background colour is supplied by the graphics device, and we can obtain animations like this</p>
<pre class="r"><code>b + theme_void()</code></pre>
<p><img src="/project/2019-04-15-kunoichi_files/figure-html/unnamed-chunk-5-1.png" width="672" /></p>
</div>
